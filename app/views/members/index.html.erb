<%= render 'phonebook/header' %>

<div style="padding-top: 15px;">

<% flash.each do |key, value| %>
  <div class="alert alert-<%= key %>"><%= value %></div>
<% end %>

<%= form_tag(members_path, :method => "get", id: "search-form") do %>
    <%= text_field_tag :search, params[:search], placeholder: "Search Contacts" %>
    <%= submit_tag "Search", :name => nil %>
<% end %>

<div class="table-responsive">
  <table class="table">
    <thead>
      <tr>
        <th>Email</th>
        <th>Admin</th>
        <th>Created At</th>
        <th>Option</th>
      </tr>
    </thead>
    <tbody>
      <% @members.each do |member| %>
      	<tr>
			<td><%= member.email %></td>
			<td><%= member.admin %></td>
			<td><%= member.created_at.strftime("%A, %b %-d %Y, %T WIB") %></td>
			<td>
          <button type="button" class="btn btn-info" onclick='edit_user("<%= member.id %>")'>Edit</button>

          <%= link_to "<button class='btn btn-danger'>Destroy</button>".html_safe, member_path(member),
            method: :delete,
            data: { confirm: 'Are you sure?' }, :class => 'button', :id => 'button6' %>
			</td>
		</tr>
	<% end %>
    </tbody>
  </table>
</div>

<div id="show_form"></div>

<button type="button" class="btn btn-info" onclick="new_user()">Add User</button>

<%= link_to "<button class='btn btn-danger'>Back</button>".html_safe, root_path , :class => 'button', :id => 'button7' %>

<%= paginate @members %>

</div>

<script>
	function new_user(){
		$.get("<%= new_member_path %>",{},null,"script");
	}
  function edit_user(id){
    $.get("/members/"+id+"/edit",{},null,"script");
  }
</script>